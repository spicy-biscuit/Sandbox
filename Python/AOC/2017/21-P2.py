Input = ["""../.. => .##/.##/###
#./.. => .../#.#/###
##/.. => .##/.../.#.
.#/#. => ###/.#./##.
##/#. => .#./#../#.#
##/## => .##/#.#/###
.../.../... => ####/.##./####/.#..
#../.../... => ..../..##/#.../.##.
.#./.../... => #.#./##.#/#.../#.#.
##./.../... => .#../.##./#.../....
#.#/.../... => ###./..##/..##/##.#
###/.../... => .###/#.##/..../....
.#./#../... => ##.#/#..#/.##./...#
##./#../... => ..../#..#/#.#./...#
..#/#../... => #.##/.#../.#.#/###.
#.#/#../... => ##../.#.#/...#/...#
.##/#../... => ##.#/.##./..#./##.#
###/#../... => ...#/####/..#./#...
.../.#./... => ##.#/#.#./..##/.##.
#../.#./... => .#.#/#.##/.##./....
.#./.#./... => #..#/#.../.##./....
##./.#./... => ###./###./..##/#..#
#.#/.#./... => .###/...#/###./###.
###/.#./... => ...#/..##/..#./#.##
.#./##./... => .##./.#../...#/..#.
##./##./... => .###/..#./.###/###.
..#/##./... => .#.#/..#./..#./...#
#.#/##./... => .#.#/##../#.../.##.
.##/##./... => .##./...#/#.##/###.
###/##./... => ...#/###./####/#.##
.../#.#/... => #.#./#.../#.#./..#.
#../#.#/... => ###./##../..#./.#..
.#./#.#/... => #.../..##/#..#/#.#.
##./#.#/... => #.#./.##./#..#/##.#
#.#/#.#/... => #.##/.#.#/#..#/.#.#
###/#.#/... => #.../##.#/###./....
.../###/... => ..##/...#/##.#/###.
#../###/... => .#.#/...#/#.##/.#..
.#./###/... => ####/#.../..#./.#.#
##./###/... => ..../####/#.##/#..#
#.#/###/... => ####/..#./####/.#.#
###/###/... => ..##/..../...#/.#..
..#/.../#.. => .###/..##/.#.#/.##.
#.#/.../#.. => #.##/#..#/.#.#/##.#
.##/.../#.. => #.##/####/.#.#/..#.
###/.../#.. => ##../##.#/..../##..
.##/#../#.. => ...#/####/..##/.##.
###/#../#.. => ..#./...#/#.../##.#
..#/.#./#.. => #..#/##.#/..##/#..#
#.#/.#./#.. => ..../.###/#..#/..##
.##/.#./#.. => ..#./...#/..##/...#
###/.#./#.. => ...#/..../##.#/....
.##/##./#.. => .#../..##/...#/.#.#
###/##./#.. => .###/#.#./####/#.#.
#../..#/#.. => .###/##.#/##../##..
.#./..#/#.. => ##../.#../###./##.#
##./..#/#.. => #..#/####/####/..##
#.#/..#/#.. => ..##/..../###./..##
.##/..#/#.. => ..##/.#.#/.#../.#..
###/..#/#.. => ...#/.###/.###/.#.#
#../#.#/#.. => ##../##../##.#/.##.
.#./#.#/#.. => ...#/.##./.#.#/#...
##./#.#/#.. => .##./.#../.#../#...
..#/#.#/#.. => ..##/##.#/####/###.
#.#/#.#/#.. => ..../.###/#.../#..#
.##/#.#/#.. => ..#./#.#./.#../...#
###/#.#/#.. => ##.#/#.../##.#/.##.
#../.##/#.. => ..../#.../..#./####
.#./.##/#.. => #..#/.#../#.#./..##
##./.##/#.. => .###/..##/###./....
#.#/.##/#.. => .###/.##./.###/#.##
.##/.##/#.. => #.##/###./.##./...#
###/.##/#.. => ...#/#.##/.##./#.#.
#../###/#.. => #..#/.###/.###/#.#.
.#./###/#.. => ..#./#.#./..../...#
##./###/#.. => ..##/##../#..#/....
..#/###/#.. => ..##/.#../.#../###.
#.#/###/#.. => ..#./.###/..../...#
.##/###/#.. => .##./###./#.../#.##
###/###/#.. => ##.#/..../.##./##.#
.#./#.#/.#. => .##./.#.#/####/....
##./#.#/.#. => ##.#/#.##/####/.#..
#.#/#.#/.#. => ####/.##./##.#/...#
###/#.#/.#. => #..#/#.##/.##./###.
.#./###/.#. => .#../..../.##./##.#
##./###/.#. => ##.#/.#../#.../.###
#.#/###/.#. => ###./###./.#../###.
###/###/.#. => #..#/#.../#..#/.#.#
#.#/..#/##. => #..#/#.../##../###.
###/..#/##. => #.../.#../.###/#...
.##/#.#/##. => .#.#/.##./.#../##.#
###/#.#/##. => #.../..../##../.###
#.#/.##/##. => .#.#/##../.###/#.#.
###/.##/##. => ###./..#./##.#/.###
.##/###/##. => ..#./.#.#/##.#/#.#.
###/###/##. => ##../.#.#/#..#/.#.#
#.#/.../#.# => ##../###./..#./##.#
###/.../#.# => .#../##../..#./##.#
###/#../#.# => ###./#..#/####/....
#.#/.#./#.# => .###/..../.###/##.#
###/.#./#.# => ###./.###/..##/.#.#
###/##./#.# => ..#./..##/#..#/#.##
#.#/#.#/#.# => .#.#/.#../.#.#/#.##
###/#.#/#.# => .###/#.../##../.###
#.#/###/#.# => .#../...#/..../...#
###/###/#.# => #..#/##.#/..#./#...
###/#.#/### => .###/.#.#/..#./####
###/###/### => ##.#/..##/.#../..##"""]

# Input = ["""../.# => ##./#../...
# .#./..#/### => #..#/..../..../#..#"""]

RealGrid = ".#./..#/###"

Input = Input[0].split("\n")

Originals = []
Conversions = []

def Grid(String):
  return(String.split("/"))

def String(Grid):
  String = ""
  for x in Grid:
    String = String + x + "/"
  return(String[:-1])

def AddGrids(ListOfGrids): #horizontally mashing
  Rows = len(ListOfGrids[0])
  OutputGrid = ["" for x in range(Rows)]
  for Row in range(Rows):
    for Index in range(len(ListOfGrids)):
      OutputGrid[Row] = OutputGrid[Row] + ListOfGrids[Index][Row]
  return(OutputGrid)

def AddStrings(ListOfStrings): #Vertical mashing
  OutputString = ""
  for String in ListOfStrings:
    OutputString = OutputString + String + "/"
  return(OutputString[:-1])
  
def Rotate(String):
  String = Grid(String)
  if len(String) == 2:
    NewString = ""
    NewString += String[0][1]
    NewString += String[1][1]
    NewString += "/"
    NewString += String[0][0]
    NewString += String[1][0]
    return(NewString)
  else:
    NewString = ""
    NewString += String[0][2] + String[1][2] + String[2][2] + "/"
    NewString += String[0][1] + String[1][1] + String[2][1] + "/"
    NewString += String[0][0] + String[1][0] + String[2][0]
    return(NewString)

def Flip(InputString):
  InputString = Grid(InputString)
  if len(InputString) == 2:
    InputString = [InputString[1], InputString[0]]
    return(String(InputString))
  else:
    InputString = [InputString[2], InputString[1], InputString[0]]
    print(InputString)
    return(String(InputString))

for x in Input:
  x = x.split(" => ")
  Original = x[0]
  New = x[1]
  Originals.append(Original)
  Conversions.append(New)
  
  Original = Rotate(Original)
  Originals.append(Original)
  Conversions.append(New)
  
  Original = Rotate(Original)
  Originals.append(Original)
  Conversions.append(New)
  
  Original = Rotate(Original)
  Originals.append(Original)
  Conversions.append(New)
  
  Original = Rotate(Original)
  if len(Original) == 11:
    Original = Flip(Original)
    Originals.append(Original)
    Conversions.append(New)
    
    Original = Rotate(Original)
    Originals.append(Original)
    Conversions.append(New)
    
    Original = Rotate(Original)
    Originals.append(Original)
    Conversions.append(New)
    
    Original = Rotate(Original)
    Originals.append(Original)
    Conversions.append(New)

# for Index in range(len(Originals)):
#   print(Originals[Index], " => ", Conversions[Index])

def Convert(String):
  Index = Originals.index(String)
  return(Conversions[Index])

def ConvertGrid(ThisString): #STRINGS GO IN
  ThisGrid = Grid(ThisString)
  Size = len(ThisGrid)

  if Size % 2 == 0:
    Squares = int(Size / 2)
    All = []
    for Row in range(Squares):
      List = []
      for Column in range(Squares):
        AString = ""
        AString = ThisGrid[2 * Row][2 * Column:2 * Column + 2] + "/" + ThisGrid[2 * Row + 1][2 * Column:2 * Column + 2]
        AString = Convert(AString)
        List.append(Grid(AString))
      List = AddGrids(List)
      All.append(String(List))
    All = AddStrings(All)
    return(All)

  if Size % 3 == 0:
    Squares = int(Size / 3)
    All = []
    for Row in range(Squares):
      List = []
      for Column in range(Squares):
        AString = ""
        AString = ThisGrid[3 * Row][3 * Column:3 * Column + 3] + "/" + ThisGrid[3 * Row + 1][3 * Column:3 * Column + 3] + "/" + ThisGrid[3 * Row + 2][3 * Column:3 * Column + 3]
        AString = Convert(AString)
        List.append(Grid(AString))
      List = AddGrids(List)
      All.append(String(List))
    All = AddStrings(All)
    return(All)

print("-- Conversion Start --")
for Iteration in range(18):
  print(Iteration)
  RealGrid = ConvertGrid(RealGrid)
  # for x in Grid(RealGrid):
  #   print(x)
  # print("----------------------")

Count = 0
for x in range(len(RealGrid)):
  if RealGrid[x] == "#":
    Count += 1
print(Count)
Input = ["""!.................-....-.-.|....................|......./.|.!................|...........|....--..............
............-...................|.............|..-.......-/..............-....!...............................
|.......//...........................................|...............-......../.....!....................!....
....|......-.-.............-......!.....!......../..................../.......................................
..!..!../................../.............-............|....-.........................|......|...............|.
-..|........................./.................!.........!./.............!..|..-...-.............!............
.!......||-..................../................-................./....|........................|.............
..............!./...........-.........../-................-.........!...!........../-.......|.................
....-..........-.-.....!......................../.......-..........-/.....................||................|.
./..........|/............................!./............................./....../........!...-|............!-
........!.............................-...../............---...........|...............|......!!..............
........//....|.!......./...!.............|..............!............./...........-.|..-.............|.......
...................!...........-/..-......!...|........-.|................!-.......|........!.................
|.|....../|............!./..-........!..............................-.....................|....../............
............-....................-..............-..-................|.//.............-.............-..........
..........-.......-......|-................./........../...!........-.......................-..!.......!......
................../....|............-....../................./.....................|.................-........
...!..............--..|.....||.....!.............!../................................................-.-...../
.........-......|....-.................-.......!-................./..|...................|!.....!.....|.|-....
......................-......................-............/....................!...../...!..../...............
...../......-...............!...-....|......../.........!................................|.........../........
........../.......!..............-...............!........-|....-......-.............|...........|........./..
./...............!....../....../..../...................................................|.....|.|../......./..
....|!........!-...../...................-.............!.!..................................././..........!...
....................................-..../......................-..///......-...|.|..........................|
.........-!.....-...........|........./..........-..!.....!./...................-........................-....
....../.......././......--.....|.!..-...-....!..........................-....-...-..|.|.....|.......!-./......
...-....................-................|.............-../........|../........-.............|!...............
...../...........-......../................|................|.....!.....-.............../...|....../!.........
./...!.....!..-./.........................|................................-....................-.............
.............!|.../....!!.....!..|...........!.....................|......|.|.....|.....-............!.!......
........................|......-..........-.../......-........|...../.!|...-................................|.
.......!...-...!..........|.....!...................!.........|..........-/.........!...................../...
.-|.......|............./..|./....-.../...!............-......../..............-.......//...-...........||.!..
..|..!./..-........!..|....-..!.........../..............................|..!..................../..|...../-..
.|.........-.!...........................!..../......./....||............!..........|............-.!|.........
....................!..../|............................!.../..|........./...../............||........!....../.
....................../.....|...................|......|.................|..|.......|................|........
.....................!.........-..../.........../../..-......!.................|.../....................../...
........!.-................/........!...../....../.|.!...|/../..........................................-.....
....................................|......./...../............-................-/..|.-....................!..
..|.........................-....................../...|.....|.............../.........../.....|!.............
.......................................|.!.|.......................-.......|..............!............-./....
..........//................!..|./................-.................-..../../|................................
.|......................................./............/..-.......-.|.........................!|..|............
............................/.-..................-./..../..............|-.........-|..........................
.................-...|................!.........|!...............................!...........!...//...........
........!..|.|--.............|.......!.................|......|!./.........................!.|................
.-|.............|!|.....!|././...|..!.............!..!...................!...........!...../..................
..../..............-..|...|.........-.........!.....-...........-.....|...!.-....-../.................!.......
........!.|........!!.........-...............-.......-..................................../..........|.......
...............-...................!/...............!..-!...........|.-........-.!-.....!....!..../......-....
.../-......./..............|.......|..//......-....................../.|....!......|..!.........../-!.........
.-....|./....-.../....../.....-..............!..-..!..-............!................|...|..........-.......|..
|......../...................!..../....!......./..|.................!...............!.........!../.|......../.
../............/........|..|.......................................!../!...............!............/.......!.
........-.-...!........../.......-....-............./.............-......./................!..........-.......
.../-................/......|/........-......|..........|..-..............|/..........................-.......
......./............../...................|../...../................./../..........!../.....!....!............
..............-..|../-........................|...!.../...-/..........!.......!......!.................-....-.
......................................-/.!........................../......-..!..!........!...............|..!
.............-.........../-|........-........!....-.....!....../..!........................!......|.......!...
.././....................|!.../!.........!.|.............../..../...|......./.!...|.......!.........|.........
......................./........./-./...........................|/...!........-.../.................||........
..............|./........!..............!.............................|/................../............|.-..|.
.........................-......../........./.....|....-..-.-..............-.-......../.......!...!./.........
.-............../../....!//......../...|......|......!..................-......!.....-....!|.........|........
..............-.....................!.................!.|...-............................|......!.............
!!.....|...........!............|............................../............................................!.
.-........../|...!..............-...............................!...........!.....|......!..........!.........
.!............!.|....-........./....../../.....-..!........|...............-..................|............-.|
.....!......-.........-.........|....../..-....|.....!..../....|........-.....................................
..........!-..-..../!.....................!.........-...........|..../-.......................!....-..........
...../............./..|..................../............../../.........|...............-../...................
.....|...../.....|......-.............................|...........-......................./............/......
.....................||./.-.................-.........!.!..................-..............!...--.........!....
.|......-......-.!.......-......!....!..!..|.........../......./.....................-..........|.............
.....!.....!............................--..................|..-........!....!...!.|.!.-...........!...!......
./...........!.......!/......|........./..|................!-................/....!...................!.!.....
..|...............................-.........-.|/......|.....|........!........................................
.......|............-............../............-......../..-...!|-...-..../...........-..........-..-/.......
............................-..!.......................................-.........................!..........-.
........................!.........|................||...-....!......!.....!.................!...!!....../.....
....!../.....-.......-.................-|...................-../.|-............|........-|......./../...!.....
..................................................!.......|......./..!./......../....|....-|.-................
....../.........|.......|...|.......!.../|...............-.......-!..!......././..................|..!.|...../
............|.....!...........-.............................../.....-.................-.../............/.../..
...../.......!............................|.....!....!................/..................!......../...........
..................-....!.........!|................/|......../.-................|...!......................--.
......-..-.....................................-!.........|.../.....................|..|.-.....!...|....!....-
......-......-.................-......|..................................................|....................
..!...............|......../........-......./.............../...........-..........|/.....///!.....-..........
.........../..|.............../..........!|.........................!...|.....!||....!...|.|/.....-....../....
...../...../.....-............................................|........|............|.........................
......-../!................../..............!............!.................../|...........|.............!.....
...........-..........................-....!..!..|.-..............................................!........|..
/.--..//....!...............................-............|..././..............................................
/...............|.........../..../......................!.....|............|...........|...................-..
..-................!../|......../...................../...........!..|.|!../..................................
....|...../.....-......!.........................-.....//...............|.........-.......|...-....--.........
....|..!.-..../....................|..........!............./...........!.../.................................
............................!...................................../.......................|...........!.......
.........../.....-.....................!..!.-..|............-...............!.........................-.......
......-.......-!.!......!..-.-........./...........!..........|........................!.....-.....!..........
..............-....../.-............./........../..............!-....-.../...../.-............!......./.-.....
......|...................................................||..../...|!.....................-.../...!........|.
......|.//........................-...../...........-..!...|......|..................../........../...........
.....................................................|.........//...........|!.....!....................|.../.
............-..||...........|....../....................!...!................................../.......|......
..!....!......./-!.!...........-!................|.........../................||.../.....-...........!........"""]

# Input = [""".|...!....
# |.-.!.....
# .....|-...
# ........|.
# ..........
# .........!
# ..../.!!..
# .-.-/..|..
# .|....-|.!
# ..//.|...."""]

import time

#NOTE: ! = \

Input = Input[0].split()

Width = len(Input[0])
Height = len(Input)
  
String = ""
for x in range(Width):
  String = String + "."
Input = [String] + Input + [String]

for x in range(len(Input)):
  Input[x] = "." + Input[x] + "."
  
def SimulateLightBeam(StartCoordinates, Direction):
  EnergizedGrid = [["." for  y in range(Width + 2)] for x in range(Height + 2)]
  PreviousPositions = []
  def Print():
    for x in range(1, len(EnergizedGrid) - 1):
      String = ""
      for y in range(1, len(EnergizedGrid[x]) - 1):
        # if Input[x][y] != ".":
        #   String = String + Input[x][y]
        # else:
          String = String + EnergizedGrid[x][y]
      print(String)
    print("------------")

  def LightBeam(Coordinates, Direction):
    Row = Coordinates[0]
    Column = Coordinates[1]
  
    while True:
      # time.sleep(0.75)
      # print(Row, Column)
      # Print()
      CurrentTile = Input[Row][Column]
      EnergizedGrid[Row][Column] = "#"
      if [Row, Column] + [Direction] in PreviousPositions:
        break
      PreviousPositions.append([Row, Column] + [Direction])
      if Row == 0 or Row >= Height + 1:
        break
      if Column == 0 or Column >= Width + 1:
        break
      
      if CurrentTile == ".":
        Direction = Direction
      elif CurrentTile == "-":
        if Direction in ["L", "R"]:
          Direction = Direction
        else:
          LightBeam([Row, Column - 1], "L")
          LightBeam([Row, Column + 1], "R")
          return(0)
      elif CurrentTile == "|":
        if Direction in ["U", "D"]:
          Direction = Direction
        else:
          LightBeam([Row - 1, Column], "U")
          LightBeam([Row + 1, Column], "D")
          return(0)
      elif CurrentTile == "/":
        if Direction == "U":
          Direction = "R"
        elif Direction == "D":
          Direction = "L"
        elif Direction == "L":
          Direction = "D"
        elif Direction == "R":
          Direction = "U"
      elif CurrentTile == "!":
        if Direction == "U":
          Direction = "L"
        elif Direction == "D":
          Direction = "R"
        elif Direction == "L":
          Direction = "U"
        elif Direction == "R":
          Direction = "D"
        
      if Direction == "U":
        Row -= 1
        continue
      if Direction == "D":
        Row += 1
        continue
      if Direction == "R":
        Column += 1
        continue
      if Direction == "L":
        Column -= 1
        continue

  LightBeam(StartCoordinates, Direction)
  Output = 0
  for x in range(1, Height + 1):
    for y in range(1, Width + 1):
      if EnergizedGrid[x][y] == "#":
        Output += 1

  return(Output)

Count = 0
# Output = (SimulateLightBeam([3, 1], "R"))
# print(Output)

Max = 0

for Row in range(1, Height + 1):
  NumEnergizedTiles = SimulateLightBeam([Row, 1], "R")
  print(Max, NumEnergizedTiles)
  if NumEnergizedTiles > Max:
    Max = NumEnergizedTiles
  NumEnergizedTiles = SimulateLightBeam([Row, Width], "L")
  print(Max, NumEnergizedTiles)
  if NumEnergizedTiles > Max:
    Max = NumEnergizedTiles

for Column in range(1, Width + 1):
  NumEnergizedTiles = SimulateLightBeam([Column, 1], "D")
  print(Max, NumEnergizedTiles)
  if NumEnergizedTiles > Max:
    Max = NumEnergizedTiles
  NumEnergizedTiles = SimulateLightBeam([Column, Height], "U")
  print(Max, NumEnergizedTiles)
  if NumEnergizedTiles > Max:
    Max = NumEnergizedTiles




  
